
% Semantic markup
\newcommand{\pubauthor}[1]{#1\xspace}
\newcommand{\pubtitle}[1]{#1\xspace}
\newcommand{\pubhow}[2]{{\em #1}\xspace#2\xspace}

% Proper names.
\newcommand{\mapfoldl}{\code{map\_foldl}\xspace}
\newcommand{\mapfoldlpar}{\code{map\-\_\-fold\-l\-\_\-par}\xspace}
\newcommand{\quicksortacc}{\code{quicksort/3}\xspace}
\newcommand{\M}{\code{M/2}\xspace}
\newcommand{\F}{\code{F/3}\xspace}
\newcommand{\LC}{\code{LC}\xspace}
\newcommand{\LCS}{\code{LCslot}\xspace}
\newcommand{\createloopgoal}{\code{create\-\_loop\_goal}\xspace}
\newcommand{\putbarriers}{\code{put\-\_bar\-riier\-s\-\_in\-\_base\_case\-s}\xspace}
\newcommand{\io}{\code{io}\xspace}
\newcommand{\di}{\code{di}\xspace}
\newcommand{\uo}{\code{uo}\xspace}
\newcommand{\NULL}{\code{NULL}\xspace}
\newcommand{\n}{{\textbackslash}n\xspace}

% These three don't get the MR prefix because they're mercury predicates
% rather than runtime procedures.
\newcommand{\signal}{\code{future\_signal/2}\xspace}
\newcommand{\wait}{\code{future\_wait/2}\xspace}
\newcommand{\get}{\code{future\_get/2}\xspace}

\newcommand{\joinandcontinue}{\code{MR\_join\_and\_continue}\xspace}
%\newcommand{\getglobalwork}{\code{MR\_get\_global\_work}\xspace}
\newcommand{\idle}{\code{MR\_idle}\xspace}
\newcommand{\idleorigcontext}{\code{MR\_idle\_orig\_context}\xspace}
\newcommand{\sleep}{\code{MR\_sleep}\xspace}
\newcommand{\trystealspark}{\code{MR\_try\_steal\_spark()}\xspace}
\newcommand{\tryruncontext}{\code{MR\_try\_run\_context()}\xspace}
\newcommand{\tryrunlocalspark}{\code{MR\_try\_run\_local\_spark()}\xspace}
\newcommand{\prepareengineforspark}{\code{MR\_prepare\_engine\_for\_spark()}\xspace}
\newcommand{\enginesleepsync}{\code{MR\_engine\_sleep\_sync}\xspace}
\newcommand{\wakeengine}{\code{MR\_wake\_engine}\xspace}
\newcommand{\push}[0]{\code{MR\_push\_spark()}\xspace}
\newcommand{\pop}[0]{\code{MR\_pop\_spark()}\xspace}
\newcommand{\steal}[0]{\code{MR\_steal\_spark()}\xspace}

% the name 'det' is already taken.  So I've prefixed all the detisms with 'd'
\newcommand{\ddet}{\code{det}\xspace}
\newcommand{\dsemidet}{\code{semidet}\xspace}
\newcommand{\dmulti}{\code{multi}\xspace}
\newcommand{\dnondet}{\code{nondet}\xspace}
\newcommand{\dfailure}{\code{failure}\xspace}
\newcommand{\derroneous}{\code{erroneous}\xspace}
\newcommand{\dccmulti}{\code{cc\_multi}\xspace}
\newcommand{\dccnondet}{\code{cc\_nondet}\xspace}

\newcommand{\seqfn}[0]{\texttt{seq}\xspace}
\newcommand{\parfn}[0]{\texttt{par}\xspace}

\newcommand{\tscope}{ThreadScope\xspace}

\newcommand{\PS}[0]{\code{ProcStatic}\xspace}
\newcommand{\PD}[0]{\code{ProcDynamic}\xspace}
\newcommand{\CSS}[0]{\code{CallSiteStatic}\xspace}
\newcommand{\CSD}[0]{\code{CallSiteDynamic}\xspace}
\newcommand{\Clique}[0]{\code{Clique}\xspace}
\newcommand{\reorder}{\code{reorder()}\xspace}
\newcommand{\trypushconjlater}{\code{try\_push\_conj\_later()}\xspace}
\newcommand{\tramp}[1]{\code{TRAMPOLINE(}#1\code{)}\xspace}
\newcommand{\fibs}[0]{\code{fibs/2+1}\xspace}

% These get used in math.
\newcommand{\prodtime}{\operatorname{prodtime}\,}
\newcommand{\prodtimep}{\operatorname{prodtime'}\,}
\newcommand{\callprodtime}{\operatorname{call\_prodtime}\,}
\newcommand{\constime}{\operatorname{constime}\,}
\newcommand{\constimep}{\operatorname{constime'}\,}
\newcommand{\callconstime}{\operatorname{call\_constime}\,}
\newcommand{\iteconstime}{\operatorname{iteconstime}\,}
\newcommand{\timef}{\operatorname{time}\,}
\DeclareMathOperator*{\Avg}{Avg}
\newcommand{\undef}{\operatorname{undefined}\xspace}
\newcommand{\canthappen}{\operatorname{cannot\,happen}\xspace}
\newcommand{\pat}[1]{\llbracket#1\rrbracket}
\newcommand{\timeofcall}{\operatorname{time\_of\_call}\xspace}

% I use this in tables to create a cell whose contents are centered.
\newcommand{\C}[1]{\multicolumn{1}{c}{#1}}
\newcommand{\Ctwo}[1]{\multicolumn{2}{c}{#1}}
% Centre with a boarder on the right.
\newcommand{\Cbr}[1]{\multicolumn{1}{c|}{#1}}
% Decimal alignment type (dcolumn package)
\newcolumntype{d}[1]{D{.}{.}{#1}}

% Author notes.
\newcommand{\authornote}[3]{
% Comment out next line to remove author notes
    {\fbox{\sc #1}:$\triangleright$\textcolor{#2}{\textbf{#3}}$\triangleleft$}%
}

\newcommand{\paul}[1]{\authornote{Paul}{blue}{#1}}
\newcommand{\peter}[1]{\authornote{Peter}{green}{#1}}
\newcommand{\zoltan}[1]{\authornote{Zoltan}{red}{#1}}
\newcommand{\status}[1]{\authornote{Status of this section}{red}{#1}}
\newcommand{\plan}[1]{\authornote{Plan}{red}{#1}}

\newcommand{\todoitem}[3]{\parbox{4in}{#1} & 
  \parbox{1in}{#2} & \parbox{1in}{#3} }

% Optional prose.
\newcommand{\iclp}[1]{{}}
\newcommand{\conf}[1]{{}}
\newcommand{\tr}[1]{{#1}}

% Semantic markup.
\newcommand{\code}[1]{{\tt#1}}
\newcommand{\samp}[1]{`{\tt#1}'}
\newcommand{\param}[1]{\mbox{\it{#1}}}
\newcommand{\dfn}[1]{{\em#1}}
\newcommand{\stress}[1]{{\em#1}\/}
\newcommand{\calls}[0]{\rightarrow}
\newcommand{\instr}[1]{{\red{\code{#1}}}}
\newcommand{\instruction}[1]{\code{#1}}
\newcommand{\var}[1]{\code{#1}}
\newcommand{\nil}[0]{\code{[]}}
\newcommand{\cons}[2]{\code{[}$#1$ \code{$|$} $#2$\code{]}}
\newcommand{\single}[1]{\code{[}$#1$\code{]}}

% Layout, floats etc.
\newlength{\figboxwidth}
\setlength{\figboxwidth}{\textwidth}
\addtolength{\subfigcapskip}{1em}

\newcommand{\picfigurenofloat}[1]{
	\newcommand{\spf}{\footnotesize}      % Sets font size for the picture
	\input{pics/#1}                       % defines macro called \graph
	\centerline{\raise 1em\box\graph}     % Prints the picture.
    \vspace{1mm}
}

% 2 arguments:
% 	- the figure filename
% 	- the caption
% note that the filename will be used to form the label "fig:filename"
\newcommand{\picfigure}[2]{
	\begin{figure}[t]
	\picfigurenofloat{#1}
    \caption{#2}
	\label{fig:#1}
	\end{figure}
}

% Extra control-flow code for algorithmic
\algloopdefx[Goto]{Goto}[1]{\textbf{goto} #1}
\newcommand{\Break}{\textbf{break}}

% Don't print closing statments in algorithmic examples.
\algnotext{EndIf}
\algnotext{EndProcedure}
\algnotext{EndLoop}

% Switches.
% New definitions
\algnewcommand\algorithmicswitch{\textbf{switch}}
\algnewcommand\algorithmiccase{\textbf{case}}
\algnewcommand\algorithmicassert{\texttt{assert}}
%\algnewcommand\Assert[1]{\State \algorithmicassert(#1)}%
% New "environments"
\algdef{SE}[SWITCH]{Switch}{EndSwitch}[1]{\algorithmicswitch\ #1\
\algorithmicdo}{\algorithmicend\ \algorithmicswitch}%
\algdef{SE}[CASE]{Case}{EndCase}[1]{\algorithmiccase\ #1}{\algorithmicend\
\algorithmiccase}%
\algtext*{EndSwitch}%
\algtext*{EndCase}%

% Custom float.
\floatstyle{plain}
\newfloat{float}{tbp}{lofloats}


