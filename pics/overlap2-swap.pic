.PS 4.75i
right
boxht = 0.5

define BP { 4 }
define CP { 1 }
define TP { 5 }

define BQ { 2 }
define CQ { 3.5 }
define TQ { 4 }

define AL { 0.25 }
define AH { -0.25 }
define LB { -0.55 }
define LS { -0.60 }

P0: box invis "p" wid 1i
P: box wid TP "pC + pB + pR"
Q: box wid TQ "qB + qC + qR"
Q0: box invis "q" wid 1i

arrow -> from P.sw + (BP, AH) to P.sw + (BP, 0)
arrow -> from P.sw + (CP, AH) to P.sw + (CP, 0)
box invis "B" wid 0.5 with .n at P.sw + (BP - AL, 0)
box invis "C" wid 0.5 with .n at P.sw + (CP - AL, 0)
arrow <-> from P.sw + (0, LB) to P.sw + (CP, LB)
arrow <-> from P.sw + (CP, LB) to P.sw + (BP, LB)
arrow <-> from P.sw + (BP, LB) to P.sw + (TP, LB)
box invis "pC" with .n at P.sw + (CP/2, LS)
box invis "pB" with .n at P.sw + ((BP+CP)/2, LS)
box invis "pR" with .n at P.sw + ((BP+TP)/2, LS)

arrow -> from Q.sw + (BQ, AH) to Q.sw + (BQ, 0)
arrow -> from Q.sw + (CQ, AH) to Q.sw + (CQ, 0)
box invis "B" wid 0.5 with .n at Q.sw + (BQ + AL, 0)
box invis "C" wid 0.5 with .n at Q.sw + (CQ + AL, 0)
arrow <-> from Q.sw + (0, LB) to Q.sw + (BQ, LB)
arrow <-> from Q.sw + (BQ, LB) to Q.sw + (CQ, LB)
arrow <-> from Q.sw + (CQ, LB) to Q.sw + (TQ, LB)
box invis "qB" with .n at Q.sw + (BQ/2, LS)
box invis "qC" with .n at Q.sw + ((BQ + CQ)/2, LS)
box invis "qR" with .n at Q.sw + ((CQ + TQ)/2, LS)

QQ0: box invis "q" wid 1i with .n at P0.s + (0, -1.5)
QQ: box wid BQ "qB"
define RQ { TQ - BQ }
QQR: box wid RQ "qC + qR" with .w at QQ.w + (BP, 0)

arrow -> from QQR.sw + (0, AH) to QQR.sw + (0, 0)
arrow -> from QQR.sw + (CQ - BQ, AH) to QQR.sw + (CQ - BQ, 0)
box invis "B" wid 0.5 with .n at QQR.sw + (AL, 0)
box invis "C" wid 0.5 with .n at QQR.sw + (CQ - BQ + AL, 0)
arrow <-> from QQ.sw + (0, LB) to QQ.sw + (BQ, LB)
arrow <-> from QQR.sw + (0, LB) to QQR.sw + ((CQ - BQ), LB)
arrow <-> from QQR.sw + ((CQ - BQ), LB) to QQR.se + (0, LB)
box invis "qB" with .n at QQ.sw + (BQ/2, LS)
box invis "qC" with .n at QQR.sw + ((CQ - BQ)/2, LS)
box invis "qR" with .n at QQR.sw + ((CQ - BQ + RQ)/2, LS)
.PE
