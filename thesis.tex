\documentclass[a4paper,twoside]{report}

\title{Automatic Parallelisation for Mercury}
\author{Paul Bone}

% According to gradresearch.unimelb.edu.au:
%
% The disteration should be roughly 80,000 words and strictly fewer than
% 100,000 words.
%
% Printed on a4 paper.
%
% 1.5 spaced.
%
% Margins no smaller than 30mm.
%
% Page numbers must be consecutive and printed within the margin.
%

% WARNING: citesort, hyperref and algorithm don't play nice together.
% This can be fixed by using natbib (which is apparently better) instead of
% citesort.
% And by using hyperref before algorithm.

\usepackage{hyperref}

\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{amsmath}
\usepackage[margin=3cm]{geometry}
\usepackage[sort&compress]{natbib}
\usepackage{pstricks}
\usepackage{setspace}
\usepackage{breakurl}
\usepackage{xspace}

\onehalfspacing

\input{macros}

\begin{document}

\begin{titlepage}
\begin{center}
\vspace*{3cm}
{\Huge \textbf{Automatic Parallelisation for Mercury}} \par
\vspace*{2cm}
{\huge \textbf{Paul Bone}} \par
\vspace*{4cm}
{\Large Submitted in total fulfilment of the requirements of the degree of
        Doctor of Philosophy} \par
\vspace*{1cm}
% XXX: Revise this date.
{\Large April 2012} \par
\vspace*{1cm}
{\Large Department of Computing and Information Systems} \par
{\Large The University of Melbourne} \par
\end{center}
\end{titlepage}

\chapter*{Abstract}

\paul{300-500 words}

\chapter*{Declaration}

% This is the prose that gradresearch.unimelb.edu.au said I should use.

This is to certify that:

\begin{itemize}

    \item the thesis comprises only my original work towards the PhD except
          where indicated in the Preface,

    \item due acknowledgement has been made in the text to all other material
          used,

    \item the thesis is fewer than 100,000 words in length, exclusive of
          tables, maps, bibliographies and appendices.

\end{itemize}

\vspace{1em}

\noindent Signed:

\vspace{1em}

\noindent Date:

\chapter*{Preface}

I begun working on automatic parallelism in Mercury as part of my Honours project
for the degree of Bachelor of Computer Science at the University of Melbourne.
This work occured before my PhD candidature commenced.
It included the profiler feedback framework that is discussed in Section
\ref{sec:background}.
It also includes an initial, rudimentary, version of the automatic
parallelisation tool
(Section \ref{sec:background}
including an algorithm for determining when a sub-computation produces or
consumes a variable (Section \ref{sec:var_use_time}).

Peter Wang and I worked together to implement work stealing for the Mercury
runtime system.
We estimate that Peter contributed 80\% of the work stealing implementation
and that I contributed 20\%.
\paul{I haven't written up this work, I must decide which chapter it belongs
in, maybe it should be part of the background}.

Chapter \ref{chap:overlap} is derived from a journal paper:

% XXX: not really a quote, I want this text to be typeset as a paragraph whose
% indent (not just first line) is larger than normal.

\begin{quote}
Paul Bone, Zoltan Somogyi and Peter Schachte.
Estimating the overlap between dependent computations for automatic
parallelization.
{\em Theory and Practice of Logic Programming}, 11(4--5):575--591, 2011.
\end{quote}

% Zoltan, Peter and I worked together to develop the overlap algorithm.
% \paul{The basis for this algorithm first appears in Zoltan's Louven slides}
% The implementation and testing is all my own work.
% Zoltan and Peter assisted me in writing and editing the paper.

Chapter \ref{chap:loop_control} is derived from a conference paper:

\begin{quote}
Paul Bone, Zoltan Somogyi and Peter Schachte.
Controlling Loops in Parallel Mercury Code.
{\em Declarative Aspects and Applications of Multicore Programming},
Philadelphia PA USA, Janurary 2012.
\end{quote}

% Zoltan and I developed the datastructures and algorithm.
% 80\% of the implementation is my own work.
% \paul{Zoltan worked on the code generator changes, but are they actually part
% of the research?}
% Zoltan and Peter assisted me in writing and editing the paper.

Chapter \ref{chap:tscope} is derived from a workshop paper:

\begin{quote}
Paul Bone and Zoltan Somogyi
Profiling parallel Mercury programs with ThreadScope.
{\em 21st Workshop on Logic-based methods in Programming Environments},
Lexington KY USA, July 2011.
\end{quote}

% Zoltan provided feedback about my ideas and contributed a number of ideas of
% his own.
% I am the sole author of the implementation.
% Zoltan assisted me in writing and editing the paper.

\chapter*{Acknowledgements}

\tableofcontents

\listoffigures

\listoftables

\chapter{Introduction}
\label{chap:intro}
\input{intro}

\section{Parallelism in programming languages}
\label{sec:literature_review}
\input{literature_review}

\chapter{Background}

\section{Mercury}
\label{sec:back_mercury}
\input{backgnd_mercury}

\section{Explicit Parallelism in Mercury}
\label{sec:back_mer_par}
\input{backgnd_merpar}

\section{Profiling and Feedback in Mercury}
\label{sec:back_deep}
\input{backgnd_deep}

\section{Historic Automatic Parallelism in Mercury}

\paul{Jerome's work}

\paul{My honours thesis}

\paul{Should this section occur before profiling in Mercury, since it uses the
framework established by the deep profiler?
Or is this section a montivation for a discussion of the deep profiler?}

\chapter{Runtime system improvements}
\label{chap:rts}

\paul{Discuss thread pinning an SMT}

\paul{Discuss changes to work stealing (queues are now owned by engines, not
threads)}

\paul{Work stealing was originally an unapplied patch written by Peter.
I fixed it up and applied it.
Then later refactored it.}

\chapter{Overlap}
\label{chap:overlap}
\input{overlap}

\paul{
    Add discussion about how our data-flow analysis doesn't recognize loops
    since they need to be treated specially.}

\chapter{Loop Control}
\label{chap:loop_control}
\input{loop_control}

\paul{
    Add something about updating overlap's cost model, then we need to
    re-evaluate it.}

\chapter{Visualisation}
\label{chap:tscope}
\input{tscope}

\chapter{Order independent state update}
\label{ref:order_indep_state_update}

\paul{This chapter may be removed}

\chapter{Conclusion}

% Each research chapter contains a discussion of related work.

\bibliographystyle{plainnat}
\bibliography{bib}

\end{document}

